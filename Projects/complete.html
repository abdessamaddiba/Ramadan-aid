<!DOCTYPE html>
<html lang="fr" dir="ltr">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="theme-color" content="#080c14"/>
<title>Compl√©ter mon profil ‚Äî Sofra</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Amiri:wght@400;700&display=swap');
:root{
  --bg:#080c14;--bg2:#0d1220;--surface:#111827;--surface2:#1a2438;
  --border:rgba(255,255,255,0.07);--border2:rgba(255,255,255,0.13);
  --green:#22c55e;--green2:#16a34a;--green-dim:rgba(34,197,94,0.1);
  --gold:#f59e0b;--gold-dim:rgba(245,158,11,0.1);
  --danger:#ef4444;--danger-dim:rgba(239,68,68,0.1);
  --text:#f1f5f9;--text2:#94a3b8;--text3:#64748b
}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:'Space Grotesk',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;padding:24px 16px 48px}
body::before{content:'';position:fixed;inset:0;background:radial-gradient(ellipse at 20% 30%,rgba(34,197,94,0.05) 0%,transparent 60%),radial-gradient(ellipse at 80% 70%,rgba(245,158,11,0.04) 0%,transparent 50%);pointer-events:none;z-index:0}
.wrap{max-width:520px;margin:0 auto;position:relative;z-index:1}

/* HEADER */
.hdr{text-align:center;margin-bottom:28px}
.moon{font-size:2.5rem;display:block;filter:drop-shadow(0 0 16px rgba(245,158,11,0.5));animation:float 3s ease-in-out infinite;margin-bottom:8px}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-7px)}}
.hdr-title{font-family:'Amiri',serif;font-size:1.6rem;font-weight:700;color:#f1f5f9;margin-bottom:4px}
.hdr-title span{color:var(--green)}
.hdr-ar{font-family:'Amiri',serif;font-size:0.95rem;color:var(--text3);margin-bottom:16px}
.back-btn{display:inline-flex;align-items:center;gap:6px;color:var(--text3);font-size:0.78rem;font-weight:600;text-decoration:none;margin-bottom:20px;transition:color 0.2s}
.back-btn:hover{color:var(--green)}

/* LANG */
.lang-row{display:flex;justify-content:center;gap:8px;margin-bottom:20px}
.lang-btn{padding:6px 16px;border-radius:20px;border:1.5px solid var(--border2);background:var(--surface);color:var(--text2);font-family:'Space Grotesk',sans-serif;font-size:0.78rem;font-weight:600;cursor:pointer;transition:all 0.15s}
.lang-btn:hover{border-color:var(--green);color:var(--green)}
.lang-btn.active{background:var(--green);color:#fff;border-color:var(--green)}

/* CARD */
.fcard{background:var(--surface);border:1px solid var(--border2);border-radius:16px;padding:24px;position:relative;overflow:hidden;margin-bottom:16px}
.fcard::before{content:'';position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,var(--green),transparent)}
.fcard-title{font-size:1rem;font-weight:700;margin-bottom:18px;color:var(--text)}

/* FIELD */
.field{margin-bottom:16px}
.field label{display:block;font-size:0.7rem;font-weight:700;color:var(--text3);text-transform:uppercase;letter-spacing:0.8px;margin-bottom:6px}
.fi{width:100%;background:var(--bg2);border:1px solid var(--border2);border-radius:10px;color:var(--text);font-family:'Space Grotesk',sans-serif;font-size:0.92rem;padding:12px 14px;outline:none;transition:border-color 0.2s,box-shadow 0.2s}
.fi:focus{border-color:var(--green);box-shadow:0 0 0 3px rgba(34,197,94,0.1)}
.fi::placeholder{color:var(--text3)}
.fi:read-only{opacity:0.6;cursor:not-allowed}
select.fi option{background:var(--surface)}

/* PHONE SEARCH */
.search-row{display:flex;gap:8px}
.search-row .fi{flex:1}
.search-btn{background:var(--green);color:#fff;border:none;border-radius:10px;padding:12px 18px;font-family:'Space Grotesk',sans-serif;font-size:0.88rem;font-weight:700;cursor:pointer;transition:all 0.2s;white-space:nowrap}
.search-btn:hover{background:var(--green2)}
.search-btn:disabled{opacity:0.5;cursor:not-allowed}

/* STATUS BOX */
.status-box{border-radius:12px;padding:14px 16px;margin-bottom:16px;font-size:0.88rem;line-height:1.6;display:none}
.status-box.found{background:var(--green-dim);border:1px solid rgba(34,197,94,0.2);color:var(--text2)}
.status-box.found strong{color:var(--green)}
.status-box.notfound{background:var(--danger-dim);border:1px solid rgba(239,68,68,0.2);color:var(--text2)}
.status-box.notfound strong{color:var(--danger)}

/* EMAIL VERIFY */
.verify-row{display:flex;gap:8px;align-items:flex-end}
.verify-row .field{flex:1;margin-bottom:0}
.send-code-btn{background:var(--surface2);color:var(--text2);border:1px solid var(--border2);border-radius:10px;padding:12px 14px;font-family:'Space Grotesk',sans-serif;font-size:0.78rem;font-weight:600;cursor:pointer;transition:all 0.2s;white-space:nowrap;flex-shrink:0}
.send-code-btn:hover{border-color:var(--gold);color:var(--gold)}
.send-code-btn:disabled{opacity:0.4;cursor:not-allowed}

.code-row{display:flex;gap:8px;margin-top:10px}
.code-input{flex:1;letter-spacing:0.3em;text-align:center;font-size:1.1rem;font-weight:700}
.verify-btn{background:var(--gold);color:#000;border:none;border-radius:10px;padding:12px 16px;font-family:'Space Grotesk',sans-serif;font-size:0.85rem;font-weight:700;cursor:pointer;transition:all 0.2s}
.verify-btn:hover{background:#e08c00}
.verify-btn:disabled{opacity:0.4;cursor:not-allowed}

.verified-badge{display:none;align-items:center;gap:6px;color:var(--green);font-size:0.82rem;font-weight:600;margin-top:8px}
.verified-badge.show{display:flex}

/* SUBMIT */
.submit-btn{width:100%;background:linear-gradient(135deg,var(--green),var(--green2));color:#fff;border:none;border-radius:12px;padding:16px;font-family:'Space Grotesk',sans-serif;font-size:1rem;font-weight:700;cursor:pointer;transition:all 0.2s;margin-top:8px}
.submit-btn:hover{transform:translateY(-1px);box-shadow:0 6px 20px rgba(34,197,94,0.3)}
.submit-btn:disabled{opacity:0.4;cursor:not-allowed;transform:none;box-shadow:none}

/* SUCCESS */
.success-screen{display:none;text-align:center;padding:48px 24px}
.success-icon{font-size:4rem;margin-bottom:16px;animation:pop 0.4s ease}
@keyframes pop{0%{transform:scale(0)}80%{transform:scale(1.15)}100%{transform:scale(1)}}
.success-title{font-size:1.4rem;font-weight:700;color:var(--green);margin-bottom:8px}
.success-sub{color:var(--text2);font-size:0.92rem;line-height:1.6}

/* TOAST */
.toast{position:fixed;bottom:24px;left:50%;transform:translateX(-50%) translateY(80px);background:#1e293b;color:#f1f5f9;padding:12px 20px;border-radius:10px;font-size:0.85rem;font-weight:500;z-index:999;transition:transform 0.3s ease;white-space:nowrap;border:1px solid var(--border2)}
.toast.show{transform:translateX(-50%) translateY(0)}

/* STEPS */
.steps{display:flex;align-items:center;gap:0;margin-bottom:24px}
.step-item{flex:1;text-align:center;font-size:0.65rem;font-weight:700;color:var(--text3);text-transform:uppercase;letter-spacing:0.05em;position:relative}
.step-item.active{color:var(--green)}
.step-item.done{color:var(--green2)}
.step-dot{width:24px;height:24px;border-radius:50%;border:2px solid var(--border2);background:var(--bg2);display:flex;align-items:center;justify-content:center;font-size:0.7rem;font-weight:700;margin:0 auto 6px;color:var(--text3)}
.step-item.active .step-dot{border-color:var(--green);color:var(--green);background:var(--green-dim)}
.step-item.done .step-dot{border-color:var(--green);background:var(--green);color:#fff}
.step-line{height:1px;background:var(--border2);flex:1;margin-bottom:22px}
.step-line.done{background:var(--green)}

/* ERROR */
.err{color:var(--danger);font-size:0.75rem;margin-top:5px;display:none}
.err.show{display:block}
</style>
</head>
<body>
<div class="wrap">

  <!-- HEADER -->
  <div class="hdr">
    <span class="moon">üåô</span>
    <div class="hdr-title" data-i18n="title">Compl√©ter mon <span>profil</span></div>
    <div class="hdr-ar">ÿ™ŸÇÿ®ŸÑ ÿßŸÑŸÑŸá ÿµŸäÿßŸÖŸÉŸÖ ŸàŸÇŸäÿßŸÖŸÉŸÖ</div>
    <div class="lang-row">
      <button class="lang-btn active" onclick="setLang('fr')">üá´üá∑ Fran√ßais</button>
      <button class="lang-btn" onclick="setLang('ar')">üá≤üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</button>
      <button class="lang-btn" onclick="setLang('en')">üá¨üáß English</button>
    </div>
    <a href="landing.html" class="back-btn">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M19 12H5M12 5l-7 7 7 7"/></svg>
      <span data-i18n="back">Retour</span>
    </a>
  </div>

  <!-- STEPS -->
  <div class="steps">
    <div class="step-item active" id="step1">
      <div class="step-dot" id="dot1">1</div>
      <span data-i18n="step1">Trouver mon profil</span>
    </div>
    <div class="step-line" id="line1"></div>
    <div class="step-item" id="step2">
      <div class="step-dot" id="dot2">2</div>
      <span data-i18n="step2">V√©rifier l'email</span>
    </div>
    <div class="step-line" id="line2"></div>
    <div class="step-item" id="step3">
      <div class="step-dot" id="dot3">3</div>
      <span data-i18n="step3">Compl√©ter</span>
    </div>
  </div>

  <!-- STEP 1: FIND PROFILE -->
  <div id="sectionFind">
    <div class="fcard">
      <div class="fcard-title" data-i18n="find_title">üîç Retrouver mon profil</div>
      <div class="field">
        <label data-i18n="phone_label">Num√©ro de t√©l√©phone</label>
        <div class="search-row">
          <input class="fi" type="tel" id="searchPhone" placeholder="+212600000000" data-i18n-ph="phone_ph"/>
          <button class="search-btn" id="searchBtn" onclick="searchProfile()" data-i18n="search_btn">Rechercher</button>
        </div>
        <div class="err" id="searchErr"></div>
      </div>

      <!-- Found -->
      <div class="status-box found" id="foundBox">
        <strong data-i18n="found_title">‚úÖ Profil trouv√© !</strong><br/>
        <span data-i18n="found_sub">Nous avons trouv√© votre profil. Veuillez v√©rifier votre email pour continuer.</span><br/><br/>
        <span id="foundName" style="color:var(--text);font-weight:600"></span>
      </div>

      <!-- Not found -->
      <div class="status-box notfound" id="notFoundBox">
        <strong data-i18n="notfound_title">‚ùå Profil introuvable</strong><br/>
        <span data-i18n="notfound_sub">Ce num√©ro n'est pas dans notre liste. Si vous √™tes nouveau, veuillez vous inscrire.</span><br/><br/>
        <a href="register.html" style="color:var(--green);font-weight:600;font-size:0.85rem" data-i18n="go_register">‚Üí Cr√©er un nouveau profil</a>
      </div>
    </div>
  </div>

  <!-- STEP 2: EMAIL VERIFY -->
  <div id="sectionEmail" style="display:none">
    <div class="fcard">
      <div class="fcard-title" data-i18n="email_title">üìß V√©rification par email</div>
      <div class="field" style="margin-bottom:8px">
        <label data-i18n="email_label">Adresse email</label>
        <div class="verify-row">
          <div class="field">
            <input class="fi" type="email" id="emailInput" placeholder="votre@email.com"/>
          </div>
          <button class="send-code-btn" id="sendCodeBtn" onclick="sendCode()" data-i18n="send_code">Envoyer le code</button>
        </div>
        <div class="err" id="emailErr"></div>
      </div>

      <div id="codeSection" style="display:none">
        <div class="field" style="margin-bottom:8px">
          <label data-i18n="code_label">Code de v√©rification (6 chiffres)</label>
          <div class="code-row">
            <input class="fi code-input" type="text" id="codeInput" maxlength="6" placeholder="‚Ä¢ ‚Ä¢ ‚Ä¢ ‚Ä¢ ‚Ä¢ ‚Ä¢" inputmode="numeric"/>
            <button class="verify-btn" id="verifyBtn" onclick="verifyCode()" data-i18n="verify_btn">V√©rifier</button>
          </div>
          <div class="err" id="codeErr"></div>
        </div>
        <div class="verified-badge" id="verifiedBadge">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22,4 12,14.01 9,11.01"/></svg>
          <span data-i18n="verified">Email v√©rifi√© ‚úì</span>
        </div>
      </div>

      <button class="submit-btn" id="continueBtn" onclick="goToStep3()" style="display:none" data-i18n="continue_btn">Continuer ‚Üí</button>
    </div>
  </div>

  <!-- STEP 3: COMPLETE PROFILE -->
  <div id="sectionComplete" style="display:none">
    <div class="fcard">
      <div class="fcard-title" data-i18n="complete_title">üìù Compl√©ter mon profil</div>

      <div class="field">
        <label data-i18n="name_label">Nom complet</label>
        <input class="fi" type="text" id="cName" readonly/>
      </div>
      <div class="field">
        <label data-i18n="phone_label">T√©l√©phone</label>
        <input class="fi" type="tel" id="cPhone" readonly/>
      </div>
      <div class="field">
        <label data-i18n="email_label">Email</label>
        <input class="fi" type="email" id="cEmail" readonly/>
        <div style="display:flex;align-items:center;gap:5px;margin-top:5px;font-size:0.75rem;color:var(--green)">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22,4 12,14.01 9,11.01"/></svg>
          <span data-i18n="verified">Email v√©rifi√© ‚úì</span>
        </div>
      </div>

      <div style="height:1px;background:var(--border2);margin:16px 0"></div>
      <div style="font-size:0.75rem;color:var(--text3);margin-bottom:16px;font-weight:600;text-transform:uppercase;letter-spacing:0.05em" data-i18n="missing_info">Informations manquantes</div>

      <div class="field">
        <label data-i18n="univ_label">Universit√© / √âcole</label>
        <input class="fi" type="text" id="cUniv" placeholder="ex: Universit√© Mohammed V"/>
      </div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
        <div class="field">
          <label data-i18n="year_label">Ann√©e d'√©tudes</label>
          <select class="fi" id="cYear">
            <option value="">‚Äî</option>
            <option>1√®re ann√©e</option><option>2√®me ann√©e</option>
            <option>3√®me ann√©e</option><option>4√®me ann√©e</option>
            <option>5√®me ann√©e</option><option>Master</option><option>Doctorat</option>
          </select>
        </div>
        <div class="field">
          <label data-i18n="city_label">Ville</label>
          <input class="fi" type="text" id="cCity" placeholder="ex: Casablanca"/>
        </div>
      </div>
      <div class="field">
        <label data-i18n="country_label">Pays</label>
        <input class="fi" type="text" id="cCountry" placeholder="Maroc" value="Maroc"/>
      </div>

      <div class="err" id="completeErr"></div>
      <button class="submit-btn" id="submitBtn" onclick="submitProfile()" data-i18n="submit_btn">‚úÖ Enregistrer mon profil</button>
    </div>
  </div>

  <!-- SUCCESS -->
  <div class="success-screen" id="successScreen">
    <div class="success-icon">üéâ</div>
    <div class="success-title" data-i18n="success_title">Profil compl√©t√© !</div>
    <div class="success-sub" data-i18n="success_sub">Votre profil a √©t√© mis √† jour avec succ√®s. Vous serez contact√© par notre √©quipe.</div>
    <br/><br/>
    <a href="landing.html" style="color:var(--green);font-weight:600;font-size:0.88rem" data-i18n="back_home">‚Üê Retour √† l'accueil</a>
  </div>

</div>

<div class="toast" id="toast"></div>

<script type="module">
import{initializeApp}from"https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import{getFirestore,collection,getDocs,doc,updateDoc,serverTimestamp}from"https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

const FC={apiKey:"AIzaSyB_SeMMk-2mL_XYTKEemoIeh_j2odQ6LNk",authDomain:"ramadan-food-aid.firebaseapp.com",projectId:"ramadan-food-aid",storageBucket:"ramadan-food-aid.firebasestorage.app",messagingSenderId:"836613630009",appId:"1:836613630009:web:c5b3047298224ec82f05e8"};
const db=getFirestore(initializeApp(FC));

let foundDoc=null;
let verifiedEmail=null;
let verifyCodeSent=null;

function normPhone(p){return p.replace(/[\s\-\(\)]/g,'').replace(/^00/,'+')}

function toast(msg,dur=3000){
  const t=document.getElementById('toast');
  t.textContent=msg;t.classList.add('show');
  setTimeout(()=>t.classList.remove('show'),dur);
}

function setStep(n){
  for(let i=1;i<=3;i++){
    const s=document.getElementById('step'+i);
    const d=document.getElementById('dot'+i);
    if(i<n){s.className='step-item done';d.textContent='‚úì'}
    else if(i===n){s.className='step-item active'}
    else{s.className='step-item'}
    if(i<3){
      document.getElementById('line'+i).className='step-line'+(i<n?' done':'');
    }
  }
}

window.searchProfile=async()=>{
  const phone=normPhone(document.getElementById('searchPhone').value.trim());
  if(!phone){document.getElementById('searchErr').textContent='Veuillez entrer un num√©ro';document.getElementById('searchErr').classList.add('show');return;}
  document.getElementById('searchErr').classList.remove('show');
  const btn=document.getElementById('searchBtn');
  btn.disabled=true;btn.textContent='...';
  document.getElementById('foundBox').style.display='none';
  document.getElementById('notFoundBox').style.display='none';
  try{
    const snap=await getDocs(collection(db,'people'));
    const match=snap.docs.find(d=>normPhone(d.data().phone||'')===phone);
    if(match){
      foundDoc={id:match.id,...match.data()};
      document.getElementById('foundName').textContent=foundDoc.name;
      document.getElementById('foundBox').style.display='block';
      // Go to step 2 after short delay
      setTimeout(()=>{
        document.getElementById('sectionFind').style.display='none';
        document.getElementById('sectionEmail').style.display='block';
        // Pre-fill email if exists
        if(foundDoc.email){
          document.getElementById('emailInput').value=foundDoc.email;
        }
        setStep(2);
      },1200);
    } else {
      document.getElementById('notFoundBox').style.display='block';
    }
  }catch(e){toast('‚ö†Ô∏è Erreur: '+e.message);}
  btn.disabled=false;btn.textContent='Rechercher';
};

window.sendCode=async()=>{
  const email=document.getElementById('emailInput').value.trim();
  if(!email||!email.includes('@')){
    document.getElementById('emailErr').textContent='Email invalide';
    document.getElementById('emailErr').classList.add('show');return;
  }
  document.getElementById('emailErr').classList.remove('show');
  const btn=document.getElementById('sendCodeBtn');
  btn.disabled=true;btn.textContent='Envoi...';
  // Generate 6-digit code
  verifyCodeSent=Math.floor(100000+Math.random()*900000).toString();
  // Store in sessionStorage temporarily
  sessionStorage.setItem('sofra_code',verifyCodeSent);
  sessionStorage.setItem('sofra_email',email);
  sessionStorage.setItem('sofra_code_ts',Date.now().toString());
  // In production: send via Firebase email / EmailJS
  // For now: show code in toast (replace with real email service)
  toast(`üìß Code envoy√© √† ${email} ‚Äî Code de test: ${verifyCodeSent}`,6000);
  document.getElementById('codeSection').style.display='block';
  btn.textContent='Renvoyer';
  setTimeout(()=>{btn.disabled=false;},30000);
};

window.verifyCode=()=>{
  const entered=document.getElementById('codeInput').value.trim();
  const stored=sessionStorage.getItem('sofra_code');
  const ts=parseInt(sessionStorage.getItem('sofra_code_ts')||'0');
  if(Date.now()-ts>600000){
    document.getElementById('codeErr').textContent='Code expir√©. Veuillez en demander un nouveau.';
    document.getElementById('codeErr').classList.add('show');return;
  }
  if(entered===stored){
    verifiedEmail=sessionStorage.getItem('sofra_email');
    document.getElementById('codeErr').classList.remove('show');
    document.getElementById('verifiedBadge').classList.add('show');
    document.getElementById('codeInput').readOnly=true;
    document.getElementById('verifyBtn').disabled=true;
    document.getElementById('continueBtn').style.display='block';
    toast('‚úÖ Email v√©rifi√© !');
  } else {
    document.getElementById('codeErr').textContent='Code incorrect. R√©essayez.';
    document.getElementById('codeErr').classList.add('show');
  }
};

window.goToStep3=()=>{
  document.getElementById('sectionEmail').style.display='none';
  document.getElementById('sectionComplete').style.display='block';
  document.getElementById('cName').value=foundDoc.name||'';
  document.getElementById('cPhone').value=foundDoc.phone||'';
  document.getElementById('cEmail').value=verifiedEmail||'';
  document.getElementById('cUniv').value=foundDoc.university||'';
  document.getElementById('cCity').value=foundDoc.city||'';
  document.getElementById('cCountry').value=foundDoc.country||'Maroc';
  if(foundDoc.year)document.getElementById('cYear').value=foundDoc.year;
  setStep(3);
};

window.submitProfile=async()=>{
  const univ=document.getElementById('cUniv').value.trim();
  const year=document.getElementById('cYear').value;
  const city=document.getElementById('cCity').value.trim();
  const country=document.getElementById('cCountry').value.trim();
  if(!univ||!year||!city){
    document.getElementById('completeErr').textContent='Veuillez remplir tous les champs obligatoires.';
    document.getElementById('completeErr').classList.add('show');return;
  }
  document.getElementById('completeErr').classList.remove('show');
  const btn=document.getElementById('submitBtn');
  btn.disabled=true;btn.textContent='Enregistrement...';
  try{
    await updateDoc(doc(db,'people',foundDoc.id),{
      email:verifiedEmail,emailVerified:true,
      university:univ,year,city,country,
      profileCompletedAt:serverTimestamp()
    });
    document.getElementById('sectionComplete').style.display='none';
    document.getElementById('successScreen').style.display='block';
    sessionStorage.removeItem('sofra_code');
    sessionStorage.removeItem('sofra_email');
    sessionStorage.removeItem('sofra_code_ts');
  }catch(e){
    document.getElementById('completeErr').textContent='Erreur: '+e.message;
    document.getElementById('completeErr').classList.add('show');
    btn.disabled=false;btn.textContent='‚úÖ Enregistrer mon profil';
  }
};
</script>

<script>
// I18N
const T={
  fr:{title:'Compl√©ter mon profil',back:'Retour',step1:'Trouver mon profil',step2:"V√©rifier l'email",step3:'Compl√©ter',find_title:'üîç Retrouver mon profil',phone_label:'Num√©ro de t√©l√©phone',phone_ph:'+212600000000',search_btn:'Rechercher',found_title:'‚úÖ Profil trouv√© !',found_sub:'Nous avons trouv√© votre profil. Veuillez v√©rifier votre email pour continuer.',notfound_title:'‚ùå Profil introuvable',notfound_sub:"Ce num√©ro n'est pas dans notre liste. Si vous √™tes nouveau, veuillez vous inscrire.",go_register:'‚Üí Cr√©er un nouveau profil',email_title:'üìß V√©rification par email',email_label:'Adresse email',send_code:'Envoyer le code',code_label:'Code de v√©rification (6 chiffres)',verify_btn:'V√©rifier',verified:'Email v√©rifi√© ‚úì',continue_btn:'Continuer ‚Üí',complete_title:'üìù Compl√©ter mon profil',name_label:'Nom complet',missing_info:'Informations manquantes',univ_label:'Universit√© / √âcole',year_label:"Ann√©e d'√©tudes",city_label:'Ville',country_label:'Pays',submit_btn:'‚úÖ Enregistrer mon profil',success_title:'Profil compl√©t√© !',success_sub:'Votre profil a √©t√© mis √† jour avec succ√®s.',back_home:"‚Üê Retour √† l'accueil"},
  ar:{title:'ÿ•ŸÉŸÖÿßŸÑ ŸÖŸÑŸÅŸä ÿßŸÑÿ¥ÿÆÿµŸä',back:'ÿ±ÿ¨Ÿàÿπ',step1:'ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ŸÖŸÑŸÅŸä',step2:'ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ®ÿ±ŸäÿØ',step3:'ÿßŸÑÿ•ŸÉŸÖÿßŸÑ',find_title:'üîç ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ŸÖŸÑŸÅŸä ÿßŸÑÿ¥ÿÆÿµŸä',phone_label:'ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ',phone_ph:'+212600000000',search_btn:'ÿ®ÿ≠ÿ´',found_title:'‚úÖ ÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ŸÖŸÑŸÅŸÉ!',found_sub:'Ÿàÿ¨ÿØŸÜÿß ŸÖŸÑŸÅŸÉ ÿßŸÑÿ¥ÿÆÿµŸä. Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ®ÿ±ŸäÿØŸÉ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ŸÑŸÑŸÖÿ™ÿßÿ®ÿπÿ©.',notfound_title:'‚ùå ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿßŸÑŸÖŸÑŸÅ',notfound_sub:'Ÿáÿ∞ÿß ÿßŸÑÿ±ŸÇŸÖ ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØ ŸÅŸä ŸÇÿßÿ¶ŸÖÿ™ŸÜÿß. ÿ•ÿ∞ÿß ŸÉŸÜÿ™ ÿ¨ÿØŸäÿØÿßŸãÿå Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ.',go_register:'‚Üí ÿ•ŸÜÿ¥ÿßÿ° ŸÖŸÑŸÅ ÿ¨ÿØŸäÿØ',email_title:'üìß ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä',email_label:'ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä',send_code:'ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ŸÖÿ≤',code_label:'ÿ±ŸÖÿ≤ ÿßŸÑÿ™ÿ≠ŸÇŸÇ (6 ÿ£ÿ±ŸÇÿßŸÖ)',verify_btn:'ÿ™ÿ≠ŸÇŸÇ',verified:'ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ‚úì',continue_btn:'ŸÖÿ™ÿßÿ®ÿπÿ© ‚Üí',complete_title:'üìù ÿ•ŸÉŸÖÿßŸÑ ŸÖŸÑŸÅŸä ÿßŸÑÿ¥ÿÆÿµŸä',name_label:'ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑŸÉÿßŸÖŸÑ',missing_info:'ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÜÿßŸÇÿµÿ©',univ_label:'ÿßŸÑÿ¨ÿßŸÖÿπÿ© / ÿßŸÑŸÖÿπŸáÿØ',year_label:'ÿ≥ŸÜÿ© ÿßŸÑÿØÿ±ÿßÿ≥ÿ©',city_label:'ÿßŸÑŸÖÿØŸäŸÜÿ©',country_label:'ÿßŸÑÿ®ŸÑÿØ',submit_btn:'‚úÖ ÿ≠ŸÅÿ∏ ŸÖŸÑŸÅŸä ÿßŸÑÿ¥ÿÆÿµŸä',success_title:'ÿ™ŸÖ ÿ•ŸÉŸÖÿßŸÑ ÿßŸÑŸÖŸÑŸÅ!',success_sub:'ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ŸÖŸÑŸÅŸÉ ÿßŸÑÿ¥ÿÆÿµŸä ÿ®ŸÜÿ¨ÿßÿ≠.',back_home:'‚Üê ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©'},
  en:{title:'Complete my profile',back:'Back',step1:'Find my profile',step2:'Verify email',step3:'Complete',find_title:'üîç Find my profile',phone_label:'Phone number',phone_ph:'+212600000000',search_btn:'Search',found_title:'‚úÖ Profile found!',found_sub:'We found your profile. Please verify your email to continue.',notfound_title:'‚ùå Profile not found',notfound_sub:'This number is not in our list. If you are new, please register.',go_register:'‚Üí Create a new profile',email_title:'üìß Email verification',email_label:'Email address',send_code:'Send code',code_label:'Verification code (6 digits)',verify_btn:'Verify',verified:'Email verified ‚úì',continue_btn:'Continue ‚Üí',complete_title:'üìù Complete my profile',name_label:'Full name',missing_info:'Missing information',univ_label:'University / School',year_label:'Year of study',city_label:'City',country_label:'Country',submit_btn:'‚úÖ Save my profile',success_title:'Profile completed!',success_sub:'Your profile has been updated successfully.',back_home:'‚Üê Back to home'}
};

function setLang(l){
  document.documentElement.lang=l;
  document.documentElement.dir=l==='ar'?'rtl':'ltr';
  document.querySelectorAll('.lang-btn').forEach(b=>b.classList.toggle('active',
    (l==='fr'&&b.textContent.includes('Fran√ßais'))||(l==='ar'&&b.textContent.includes('ÿßŸÑÿπÿ±ÿ®Ÿäÿ©'))||(l==='en'&&b.textContent.includes('English'))));
  const t=T[l];
  document.querySelectorAll('[data-i18n]').forEach(el=>{const k=el.dataset.i18n;if(t[k])el.textContent=t[k];});
  document.querySelectorAll('[data-i18n-ph]').forEach(el=>{const k=el.dataset.i18nPh;if(t[k])el.placeholder=t[k];});
  document.querySelector('.hdr-ar').textContent='ÿ™ŸÇÿ®ŸÑ ÿßŸÑŸÑŸá ÿµŸäÿßŸÖŸÉŸÖ ŸàŸÇŸäÿßŸÖŸÉŸÖ';
}
window.setLang=setLang;
</script>
</body>
</html>
